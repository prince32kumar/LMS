stages:
  - test

sast:
  stage: test
  image: 'docker:latest' # You can choose an appropriate image based on your project requirements
  variables:
    SPOTBUGS_REPORT_PATH: "spotbugs-report.html" # Customize the report name as desired
  script:
    - apt-get update -qy
    - apt-get install -y curl
    - curl -LJO https://gitlab.com/gitlab-org/security-products/analyzers/spotbugs/-/jobs/artifacts/master/raw/spotbugs.gitlab-ci.yml
  artifacts:
    paths:
      - gl-sast-report.json # This will save the SAST report as an artifact
      - spotbugs-report.html # This will save the spotbugs report as an artifact
  only:
    - merge_requests # Run SAST only for merge requests
